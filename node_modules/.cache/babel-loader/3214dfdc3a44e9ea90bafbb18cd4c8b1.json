{"ast":null,"code":"var _jsxFileName = \"/home/victor/COVID-19-Coding-Fest/src/pages/home/components/MapContainer.js\";\nimport { withScriptjs, withGoogleMap, GoogleMap, Marker, InfoWindow, Circle } from \"react-google-maps\";\nimport Geocode from \"react-geocode\";\nimport React, { Component, Fragment } from \"react\";\nimport { compose, withProps, withStateHandlers } from \"recompose\";\nimport { Drawer } from \"antd\";\nimport { getDistance } from 'geolib'; // import data from \"../../../data/Data\";\n\nclass PeopleMap extends Component {\n  constructor(props) {\n    super(props);\n\n    this.showDrawer = () => {\n      this.setState({\n        visible: true\n      });\n    };\n\n    this.onClose = () => {\n      this.setState({\n        visible: false\n      });\n    };\n\n    this.state = {\n      userInput: \"\",\n      defaultMapSize: {\n        lat: -33.797,\n        lng: 151.1\n      },\n      windowSize: 10,\n      emask_data: [],\n      visible: true\n    };\n  }\n\n  componentDidMount() {\n    fetch(\"https://fhrs5atn73.execute-api.ap-southeast-2.amazonaws.com/dev\").then(response => response.json()).then(data => {\n      this.setState({\n        emask_data: data\n      }); // this.setState({openToogleList: Array(this.state.emask_data.length).fill(true)})\n\n      Geocode.setApiKey(\"AIzaSyAOOgr6Eg-N_Pi3Ic5mNo1EybmjAH3w1D0\"); // set response language. Defaults to english.\n\n      Geocode.setLanguage(\"en\"); // set response region. Its optional.\n      // A Geocoding request with region=es (Spain) will return the Spanish city.\n\n      Geocode.setRegion(\"aus\");\n      Geocode.enableDebug(); // Get latidude & longitude from address.\n\n      for (var i = 0; i < data.length; i++) {\n        let address = data[i].address;\n        Geocode.fromAddress(address).then(response => {\n          const {\n            lat,\n            lng\n          } = response.results[0].geometry.location;\n\n          for (var index = 0; index < data.length; index++) {\n            if (data[index].address === address) {\n              data[index].location = {\n                lat: lat,\n                lng: lng\n              };\n              this.setState({\n                emask_data: data\n              });\n              break;\n            }\n          } // console.log(lat)\n          // console.log(lng)\n\n        }, error => {\n          console.error(error);\n        });\n      }\n    });\n  } // if (this.props.clickable ===true){\n  //   console.log(\"hello\")\n  //   for (var i =0; i < this.state.location_data.length; i++){\n  //     if(data[i].name === this.props.clickedInput.replace(/\\s/g, '')){\n  //       console.log('world')\n  //       // let item =this.state.location_data[i]\n  //       // let copyDefaultMapSize= {...this.state.defaultMapSize};\n  //       // copyDefaultMapSize.lat= parseFloat(item.lat);\n  //       // copyDefaultMapSize.lng = parseFloat(item.lng) ;\n  //       this.setState({\n  //         // defaultMapSize: copyDefaultMapSize,\n  //         windowSize:20\n  //       })\n  //       break;\n  //     }\n  //   // }\n  //   }\n  // }\n  // componentDidUpdate(previousProps, previousState){\n  //   // if (this.state.defaultCenter !== previousState.defaultCenter && this.state.windowSize !== previousState.windowSize){\n  //     if (this.props.clickable ===true){\n  //       console.log(\"hello\")\n  //       for (var i =0; i < this.state.location_data.length; i++){\n  //         if(data[i].name === this.props.clickedInput.replace(/\\s/g, '')){\n  //           console.log('world')\n  //           // let item =this.state.location_data[i]\n  //           // let copyDefaultMapSize= {...this.state.defaultMapSize};\n  //           // copyDefaultMapSize.lat= parseFloat(item.lat);\n  //           // copyDefaultMapSize.lng = parseFloat(item.lng) ;\n  //           this.setState({\n  //             // defaultMapSize: copyDefaultMapSize,\n  //             windowSize:20\n  //           })\n  //           break;\n  //         }\n  //       // }\n  //     }\n  //   }\n  // }\n  // changeMapSize(item){\n  // }\n\n\n  onOpen(index) {\n    let new_emask = [...this.state.emask_data];\n    new_emask[index].isMapOpen = !new_emask[index].isMapOpen;\n    this.setState({\n      emask: new_emask\n    });\n  }\n\n  getIndexPerson() {\n    for (var i = 0; i < this.state.emask_data.length; i++) {\n      if (this.state.emask_data[i].name === this.props.clickedInput.replace(/\\s/g, '')) {\n        // console.log(this.state.clickedInput)\n        return i;\n      }\n    }\n  }\n\n  getLocation(item) {\n    var list_location = [];\n\n    for (var i = 0; i < this.state.emask_data.length; i++) {\n      if (getDistance(this.state.emask_data[i].location, item.location) < 1000 && item.address !== this.state.emask_data[i].address) {\n        var coord = this.state.emask_data[i].location;\n        coord.name = this.state.emask_data[i].name;\n        coord.address = this.state.emask_data[i].address;\n        console.log(item.address + \" \" + item.name);\n        console.log(this.state.emask_data[i].name + \" \" + this.state.emask_data[i].address); // console.log(getDistance(this.state.emask_data[i].location, item.location))\n        // console.log(getDistance(this.state.location_data[i],item))\n\n        list_location.push(coord);\n      }\n    }\n\n    return list_location;\n  }\n\n  centerChange() {\n    if (this.props.clickable === true) {\n      var index = this.getIndexPerson();\n\n      if (index != undefined) {\n        this.setState({\n          defaultMapSize: this.state.emask_data[index].location\n        });\n      }\n    }\n  }\n\n  render() {\n    console.log(this.state.emask_data); // console.log(this.state.location_data)\n\n    return /*#__PURE__*/React.createElement(GoogleMap, {\n      zoom: this.props.windowSize,\n      onCenterChanged: () => {\n        this.centerChange();\n      },\n      onZoomChanged: () => {\n        this.zoomChange();\n      },\n      center: this.state.defaultMapSize,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }\n    }, this.state.emask_data.map((item, index) => {\n      if (this.props.clickable === true) {\n        if (this.state.emask_data[index].name == this.props.clickedInput.replace(/\\s/g, '')) {\n          var list_location = this.getLocation(item);\n          return /*#__PURE__*/React.createElement(\"div\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 15\n            }\n          }, /*#__PURE__*/React.createElement(Drawer, {\n            title: \"Basic Drawer\",\n            placement: \"right\",\n            closable: false,\n            onClose: this.onClose,\n            visible: this.state.visible,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 17\n            }\n          }, /*#__PURE__*/React.createElement(\"p\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 9\n            }\n          }, \"Some contents...\"), /*#__PURE__*/React.createElement(\"p\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 9\n            }\n          }, \"Some contents...\"), /*#__PURE__*/React.createElement(\"p\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 9\n            }\n          }, \"Some contents...\")), list_location.map((item1, index1) => {\n            // console.log(data[index1].address)\n            return /*#__PURE__*/React.createElement(Marker, {\n              position: {\n                lat: parseFloat(item1.lat),\n                lng: parseFloat(item1.lng)\n              },\n              key: index1,\n              onClick: () => this.onOpen(index1),\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 17\n              }\n            }, this.state.emask_data[index1].isMapOpen && /*#__PURE__*/React.createElement(Fragment, {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 15\n              }\n            }, /*#__PURE__*/React.createElement(InfoWindow, {\n              onCloseClick: () => this.onOpen(index1),\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 15\n              }\n            }, /*#__PURE__*/React.createElement(\"div\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 17\n              }\n            }, /*#__PURE__*/React.createElement(\"h3\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 17\n              }\n            }, \"Name: \", item1.name), /*#__PURE__*/React.createElement(\"h3\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 17\n              }\n            }, \"Address: \", item1.address)))));\n          }), /*#__PURE__*/React.createElement(Marker, {\n            position: {\n              lat: parseFloat(item.location.lat),\n              lng: parseFloat(item.location.lng)\n            },\n            key: index,\n            onClick: () => this.onOpen(index),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 15\n            }\n          }, this.state.emask_data[index].isMapOpen && /*#__PURE__*/React.createElement(Fragment, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 15\n            }\n          }, /*#__PURE__*/React.createElement(InfoWindow, {\n            onCloseClick: () => this.onOpen(index),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 15\n            }\n          }, /*#__PURE__*/React.createElement(\"div\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 17\n            }\n          }, /*#__PURE__*/React.createElement(\"h3\", {\n            style: {\n              color: \"red\"\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 17\n            }\n          }, /*#__PURE__*/React.createElement(\"b\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 45\n            }\n          }, \" Name: \", this.state.emask_data[index].name)), /*#__PURE__*/React.createElement(\"h3\", {\n            style: {\n              color: \"red\"\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 17\n            }\n          }, /*#__PURE__*/React.createElement(\"b\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 45\n            }\n          }, \" Address: \", this.state.emask_data[index].address)))), /*#__PURE__*/React.createElement(Circle, {\n            radius: 1000,\n            center: {\n              lat: parseFloat(item.location.lat),\n              lng: parseFloat(item.location.lng)\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 15\n            }\n          }))));\n        }\n      }\n    }));\n  }\n\n}\n\nconst MapContainer = compose(withScriptjs, withGoogleMap)(PeopleMap);\nexport default MapContainer; //   <MapWithAMarker\n//     googleMapURL=\"https://maps.googleapis.com/maps/api/js?key=AIzaSyC4R6AN7SmujjPUIGKdyao2Kqitzr1kiRg&v=3.exp&libraries=geometry,drawing,places\"\n//     loadingElement={<div style={{ height: `100%` }} />}\n//     containerElement={<div style={{ height: `400px` }} />}\n//     mapElement={<div style={{ height: `100%` }} />}\n//   />","map":{"version":3,"sources":["/home/victor/COVID-19-Coding-Fest/src/pages/home/components/MapContainer.js"],"names":["withScriptjs","withGoogleMap","GoogleMap","Marker","InfoWindow","Circle","Geocode","React","Component","Fragment","compose","withProps","withStateHandlers","Drawer","getDistance","PeopleMap","constructor","props","showDrawer","setState","visible","onClose","state","userInput","defaultMapSize","lat","lng","windowSize","emask_data","componentDidMount","fetch","then","response","json","data","setApiKey","setLanguage","setRegion","enableDebug","i","length","address","fromAddress","results","geometry","location","index","error","console","onOpen","new_emask","isMapOpen","emask","getIndexPerson","name","clickedInput","replace","getLocation","item","list_location","coord","log","push","centerChange","clickable","undefined","render","zoomChange","map","item1","index1","parseFloat","color","MapContainer"],"mappings":"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","sourcesContent":["import {\n    withScriptjs,\n    withGoogleMap,\n    GoogleMap,\n    Marker,\n    InfoWindow, \n    Circle\n  } from \"react-google-maps\";\nimport Geocode from \"react-geocode\";\nimport React, {Component, Fragment} from \"react\"\nimport { compose, withProps, withStateHandlers } from \"recompose\"\nimport {Drawer} from \"antd\"\nimport { getDistance } from 'geolib';\n// import data from \"../../../data/Data\";\n\n  class PeopleMap extends Component{\n    constructor(props){\n      super(props);\n      this.state = {\n        userInput: \"\",\n      \n        \n        defaultMapSize: { lat: -33.797, lng: 151.1 }, \n        windowSize:10, \n        emask_data: [], \n        visible: true\n        \n      }\n    }\n    componentDidMount(){\n     \n      fetch(\"https://fhrs5atn73.execute-api.ap-southeast-2.amazonaws.com/dev\")\n        .then(response => response.json())\n        .then(data => {\n          this.setState({emask_data:data});\n        \n      // this.setState({openToogleList: Array(this.state.emask_data.length).fill(true)})\n      Geocode.setApiKey(\"AIzaSyAOOgr6Eg-N_Pi3Ic5mNo1EybmjAH3w1D0\");\n \n      // set response language. Defaults to english.\n      Geocode.setLanguage(\"en\");\n      \n      // set response region. Its optional.\n      // A Geocoding request with region=es (Spain) will return the Spanish city.\n      Geocode.setRegion(\"aus\");\n      Geocode.enableDebug();\n      \n      \n      \n      // Get latidude & longitude from address.\n      \n      for (var i=0; i< data.length; i++){\n        let address = data[i].address\n        Geocode.fromAddress(address).then(\n          response => {\n            \n            const { lat, lng } = response.results[0].geometry.location;\n            \n            \n            for(var index =0 ; index <data.length; index ++){\n              if(data[index].address === address){\n                data[index].location= {lat:lat, lng:lng}\n                this.setState({\n                  emask_data:data\n                })\n                break;\n              }\n            }           \n            \n            // console.log(lat)\n            // console.log(lng)\n            \n\n          },\n          error => {\n            console.error(error);\n          }\n        );\n      }\n      })\n        \n      }\n            \n      // if (this.props.clickable ===true){\n      //   console.log(\"hello\")\n      //   for (var i =0; i < this.state.location_data.length; i++){\n      //     if(data[i].name === this.props.clickedInput.replace(/\\s/g, '')){\n      //       console.log('world')\n      //       // let item =this.state.location_data[i]\n      //       // let copyDefaultMapSize= {...this.state.defaultMapSize};\n      //       // copyDefaultMapSize.lat= parseFloat(item.lat);\n      //       // copyDefaultMapSize.lng = parseFloat(item.lng) ;\n      //       this.setState({\n      //         // defaultMapSize: copyDefaultMapSize,\n      //         windowSize:20\n      //       })\n      //       break;\n      //     }\n      //   // }\n        \n      //   }\n      // }\n      \n     \n    \n    // componentDidUpdate(previousProps, previousState){\n    //   // if (this.state.defaultCenter !== previousState.defaultCenter && this.state.windowSize !== previousState.windowSize){\n    //     if (this.props.clickable ===true){\n    //       console.log(\"hello\")\n    //       for (var i =0; i < this.state.location_data.length; i++){\n    //         if(data[i].name === this.props.clickedInput.replace(/\\s/g, '')){\n    //           console.log('world')\n    //           // let item =this.state.location_data[i]\n    //           // let copyDefaultMapSize= {...this.state.defaultMapSize};\n    //           // copyDefaultMapSize.lat= parseFloat(item.lat);\n    //           // copyDefaultMapSize.lng = parseFloat(item.lng) ;\n    //           this.setState({\n    //             // defaultMapSize: copyDefaultMapSize,\n    //             windowSize:20\n    //           })\n    //           break;\n    //         }\n    //       // }\n          \n    //     }\n    //   }\n    // }\n    // changeMapSize(item){\n      \n      \n    // }\n    showDrawer = () => {\n      this.setState({visible:true});\n    };\n  \n    onClose = () => {\n      this.setState({visible:false});\n    };\n    onOpen(index){\n      \n      let new_emask = [...this.state.emask_data];\n      new_emask[index].isMapOpen = ! new_emask[index].isMapOpen;\n\n      this.setState({\n        emask: new_emask\n      }\n      )\n    }\n    getIndexPerson(){\n      \n      for(var i =0; i< this.state.emask_data.length; i++){\n        if(this.state.emask_data[i].name===this.props.clickedInput.replace(/\\s/g, '')){\n\n          // console.log(this.state.clickedInput)\n          return i;\n        }\n      }\n    }\n    getLocation(item){\n      var list_location= []\n      for (var i = 0 ; i < this.state.emask_data.length; i++){\n        if(getDistance(this.state.emask_data[i].location, item.location)< 1000 && item.address !== this.state.emask_data[i].address  ){\n          var coord = this.state.emask_data[i].location;\n          coord.name= this.state.emask_data[i].name\n          coord.address= this.state.emask_data[i].address\n          console.log(item.address +\" \"+item.name)\n          console.log(this.state.emask_data[i].name +\" \" +this.state.emask_data[i].address)\n          // console.log(getDistance(this.state.emask_data[i].location, item.location))\n\n          // console.log(getDistance(this.state.location_data[i],item))\n          list_location.push(coord)\n          \n          \n        }\n      }\n      return list_location\n    }\n    centerChange(){\n      \n      if(this.props.clickable === true){\n        \n        var index = this.getIndexPerson()\n        if(index != undefined){\n          this.setState({defaultMapSize:this.state.emask_data[index].location});\n      \n        }\n      }\n    }\n   \n    \n    render(){\n      console.log(this.state.emask_data)\n      // console.log(this.state.location_data)\n      return(\n        <GoogleMap\n    zoom={this.props.windowSize}\n      onCenterChanged = {() =>{this.centerChange()}}\n      onZoomChanged= {()=> {this.zoomChange()}}\n      center={this.state.defaultMapSize}\n    >\n      \n      {this.state.emask_data.map((item, index)=>{\n        if (this.props.clickable === true){\n          \n          if (this.state.emask_data[index].name == this.props.clickedInput.replace(/\\s/g, '')){\n            var list_location= this.getLocation(item)\n            \n            return(\n              <div>\n                <Drawer\n        title=\"Basic Drawer\"\n        placement=\"right\"\n        closable={false}\n        onClose={this.onClose}\n        visible={this.state.visible}\n      >\n        <p>Some contents...</p>\n        <p>Some contents...</p>\n        <p>Some contents...</p>\n      </Drawer>\n              {list_location.map((item1,index1) =>{\n                // console.log(data[index1].address)\n                return(\n                <Marker\n            position={{lat : parseFloat(item1.lat), lng: parseFloat(item1.lng) }}\n            key = {index1}\n            onClick={() => this.onOpen(index1) }\n              >\n            {this.state.emask_data[index1].isMapOpen &&\n              <Fragment>\n              <InfoWindow onCloseClick={()=> this.onOpen(index1)}>\n                <div>\n                <h3>Name: {item1.name}</h3>\n                <h3>Address: {item1.address}</h3>\n                </div>\n                {/* <Person name = {item1.name} /> */}\n              </InfoWindow>\n              \n            </Fragment> \n          \n            }\n         \n              </Marker>\n\n              )})}\n              <Marker\n            position={{lat : parseFloat(item.location.lat), lng: parseFloat(item.location.lng) }}\n            key = {index}\n            onClick={() => this.onOpen(index) }\n              >\n            {this.state.emask_data[index].isMapOpen &&\n              <Fragment>\n              <InfoWindow onCloseClick={()=> this.onOpen(index)}>\n                <div>\n                <h3 style= {{color: \"red\"}}><b> Name: {this.state.emask_data[index].name}</b></h3>\n                {/* <h3>{this.props.clickedInput}</h3> */}\n                <h3 style= {{color: \"red\"}}><b> Address: {this.state.emask_data[index].address}</b></h3>\n                </div>\n              </InfoWindow>\n              <Circle\n              radius= {1000}\n              center= {{lat : parseFloat(item.location.lat), lng: parseFloat(item.location.lng) }}\n              />\n              \n            </Fragment> \n          \n            }\n            \n              </Marker>\n            </div>\n           \n            \n      \n      \n              \n          )\n    }}})}\n      \n    </GoogleMap>\n      )\n    }\n  }\n  const MapContainer =compose(\n    withScriptjs,\n    withGoogleMap\n  )(PeopleMap);\n  \n  export default MapContainer\n  \n//   <MapWithAMarker\n//     googleMapURL=\"https://maps.googleapis.com/maps/api/js?key=AIzaSyC4R6AN7SmujjPUIGKdyao2Kqitzr1kiRg&v=3.exp&libraries=geometry,drawing,places\"\n//     loadingElement={<div style={{ height: `100%` }} />}\n//     containerElement={<div style={{ height: `400px` }} />}\n//     mapElement={<div style={{ height: `100%` }} />}\n//   />"]},"metadata":{},"sourceType":"module"}