{"ast":null,"code":"import _regeneratorRuntime from\"/home/victor/COVID-19-Coding-Fest/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/victor/COVID-19-Coding-Fest/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/victor/COVID-19-Coding-Fest/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from\"react\";export function useUserMedia(requestedMedia){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),mediaStream=_useState2[0],setMediaStream=_useState2[1];useEffect(function(){function enableStream(){return _enableStream.apply(this,arguments);}function _enableStream(){_enableStream=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var stream;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return navigator.mediaDevices.getUserMedia(requestedMedia);case 3:stream=_context.sent;setMediaStream(stream);_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return _enableStream.apply(this,arguments);}if(!mediaStream){enableStream();}else{return function cleanup(){mediaStream.getTracks().forEach(function(track){track.stop();});};}},[mediaStream,requestedMedia]);return mediaStream;}","map":{"version":3,"sources":["/home/victor/COVID-19-Coding-Fest/src/pages/scan/components/useUserMedia.js"],"names":["useState","useEffect","useUserMedia","requestedMedia","mediaStream","setMediaStream","enableStream","navigator","mediaDevices","getUserMedia","stream","cleanup","getTracks","forEach","track","stop"],"mappings":"yVAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CAEA,MAAO,SAASC,CAAAA,YAAT,CAAsBC,cAAtB,CAAsC,eACLH,QAAQ,CAAC,IAAD,CADH,wCACpCI,WADoC,eACvBC,cADuB,eAG3CJ,SAAS,CAAC,UAAM,SACCK,CAAAA,YADD,8IACd,oLAEyBC,CAAAA,SAAS,CAACC,YAAV,CAAuBC,YAAvB,CAAoCN,cAApC,CAFzB,QAEUO,MAFV,eAGIL,cAAc,CAACK,MAAD,CAAd,CAHJ,iJADc,+CAUd,GAAI,CAACN,WAAL,CAAkB,CAChBE,YAAY,GACb,CAFD,IAEO,CACL,MAAO,SAASK,CAAAA,OAAT,EAAmB,CACxBP,WAAW,CAACQ,SAAZ,GAAwBC,OAAxB,CAAgC,SAAAC,KAAK,CAAI,CACvCA,KAAK,CAACC,IAAN,GACD,CAFD,EAGD,CAJD,CAKD,CACF,CAnBQ,CAmBN,CAACX,WAAD,CAAcD,cAAd,CAnBM,CAAT,CAqBA,MAAOC,CAAAA,WAAP,CACD","sourcesContent":["import { useState, useEffect } from \"react\";\n\nexport function useUserMedia(requestedMedia) {\n  const [mediaStream, setMediaStream] = useState(null);\n\n  useEffect(() => {\n    async function enableStream() {\n      try {\n        const stream = await navigator.mediaDevices.getUserMedia(requestedMedia);\n        setMediaStream(stream);\n      } catch(err) {\n        // Removed for brevity\n      }\n    }\n\n    if (!mediaStream) {\n      enableStream();\n    } else {\n      return function cleanup() {\n        mediaStream.getTracks().forEach(track => {\n          track.stop();\n        });\n      }\n    }\n  }, [mediaStream, requestedMedia]);\n\n  return mediaStream;\n}"]},"metadata":{},"sourceType":"module"}