{"ast":null,"code":"import _classCallCheck from\"/home/victor/COVID-19-Coding-Fest/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/victor/COVID-19-Coding-Fest/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/victor/COVID-19-Coding-Fest/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/victor/COVID-19-Coding-Fest/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/victor/COVID-19-Coding-Fest/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import data from\"../../data/Data\";import moment from\"moment\";import{Card,Avatar,Col,Icon}from\"antd\";var Meta=Card.Meta;var History=/*#__PURE__*/function(_Component){_inherits(History,_Component);function History(props){var _this;_classCallCheck(this,History);_this=_possibleConstructorReturn(this,_getPrototypeOf(History).call(this,props));_this.state={emask_data:[],count_:0};return _this;}_createClass(History,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(sessionStorage.getItem(\"count_data\")){this.setState({count:sessionStorage.setItem});}sessionStorage.setItem(\"count_data\",0);fetch(\"https://fhrs5atn73.execute-api.ap-southeast-2.amazonaws.com/dev\").then(function(response){return response.json();}).then(function(data){return _this2.setState({emask_data:data});});}},{key:\"sortData\",value:function sortData(){var sortedData=this.state.emask_data.sort(function(a,b){// Compare the 2 dates\nif(moment(a.date).isBefore(b.date))return 1;if(moment(a.date).isAfter(b.date))return-1;return 0;});return sortedData;}},{key:\"listDate\",value:function listDate(){var sortedData=this.sortData();// console.log(sortedData)\nvar list_date=[];for(var i=0;i<sortedData.length;i++){if(i===0){list_date.push(moment(sortedData[i].date).format(\"YYYY-MM-DD\"));}else{// console.log(i)\n// console.log(sortedData[i].date)\nif(moment(sortedData[i].date).format(\"YYYY-MM-DD\")!==moment(sortedData[i-1].date).format(\"YYYY-MM-DD\")){list_date.push(moment(sortedData[i].date).format(\"YYYY-MM-DD\"));}}}return list_date;}},{key:\"render\",value:function render(){var sortedData=this.sortData();var listDate=this.listDate();console.log(\"list date\");console.log(listDate);return React.createElement(\"div\",null,listDate.map(function(item,index){return React.createElement(\"div\",null,React.createElement(\"h3\",null,React.createElement(\"b\",null,moment(item).format(\"DD-MMMM-YYYY\"),\" \")),React.createElement(\"hr\",null),sortedData.map(function(item1,index1){if(moment(item1.date).format(\"YYYY-MM-DD\")===item){return React.createElement(Card,null,React.createElement(Col,{lg:10,md:12,sm:24},React.createElement(Meta,{avatar:React.createElement(Avatar,{size:20,icon:item1.status===\"ALERTED\"?\"alert\":\"check\",style:{backgroundColor:\"green\"}}),title:item1.name})),React.createElement(Col,{lg:10,md:12,sm:24},\" \",moment(item1.date).format(\"LT\")));}}));}));}}]);return History;}(Component);export default History;","map":{"version":3,"sources":["/home/victor/COVID-19-Coding-Fest/src/pages/history/History.js"],"names":["React","Component","data","moment","Card","Avatar","Col","Icon","Meta","History","props","state","emask_data","count_","sessionStorage","getItem","setState","count","setItem","fetch","then","response","json","sortedData","sort","a","b","date","isBefore","isAfter","sortData","list_date","i","length","push","format","listDate","console","log","map","item","index","item1","index1","status","backgroundColor","name"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\"\nimport data from \"../../data/Data\"\nimport moment from \"moment\"\nimport {Card, Avatar, Col, Icon } from \"antd\";\nconst {Meta} = Card\nclass History extends Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            emask_data: [], \n            count_: 0\n        }\n    }\n    componentDidMount(){\n        if(sessionStorage.getItem(\"count_data\")){\n            this.setState({count: sessionStorage.setItem})\n        }\n        sessionStorage.setItem(\"count_data\", 0)\n        \n        fetch(\"https://fhrs5atn73.execute-api.ap-southeast-2.amazonaws.com/dev\")\n        .then(response => response.json())\n        .then(data => this.setState({emask_data:data}))\n    }\n    sortData(){\n        let sortedData = this.state.emask_data.sort(function(a, b) {\n            \n            // Compare the 2 dates\n            if (moment(a.date).isBefore(b.date)) return 1;\n            if (moment(a.date).isAfter(b.date)) return -1;\n            return 0;\n        });\n          return sortedData\n    }\n    listDate(){\n        let sortedData = this.sortData();\n        // console.log(sortedData)\n        let list_date = []\n        for (let i =0 ; i < sortedData.length; i++){\n            \n            if (i === 0){\n                list_date.push(moment(sortedData[i].date).format(\"YYYY-MM-DD\"))\n            }else{\n                // console.log(i)\n                // console.log(sortedData[i].date)\n                if (moment(sortedData[i].date).format(\"YYYY-MM-DD\") !== moment(sortedData[i-1].date).format(\"YYYY-MM-DD\")){\n                    list_date.push(moment(sortedData[i].date).format(\"YYYY-MM-DD\"))\n                }\n            }\n        }\n        return list_date\n    }\n    \n    render(){\n        let sortedData= this.sortData();\n        let listDate = this.listDate();\n        console.log(\"list date\")\n        console.log(listDate)\n\n        return(\n            <div>\n              {listDate.map((item, index) =>{\n                  return(\n                      <div>\n                      <h3><b>{moment(item).format((\"DD-MMMM-YYYY\"))} </b></h3>\n                      <hr></hr>\n                      {sortedData.map((item1, index1) =>{\n                          if(moment(item1.date).format(\"YYYY-MM-DD\") === item  ){\n                                return(\n                                    <Card >\n                                        <Col lg={10} md={12} sm={24}>\n                                           \n                                        <Meta\n                                avatar={<Avatar size = {20} icon= {item1.status === \"ALERTED\"? \"alert\": \"check\"}  style= {{backgroundColor: \"green\" }} />}\n                                title =  {item1.name}\n                            /></Col>\n                            <Col lg={10} md={12} sm={24}> {moment(item1.date).format(\"LT\")}</Col>\n                            </Card>\n                                )\n                          }\n                      })}\n                      </div>\n                      \n                  )\n              })}  \n            </div>\n        )\n    }\n}\nexport default History"]},"metadata":{},"sourceType":"module"}