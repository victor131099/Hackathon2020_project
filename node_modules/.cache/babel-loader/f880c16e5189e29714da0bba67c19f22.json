{"ast":null,"code":"var _jsxFileName = \"/home/victor/Hackathon2020_project/src/pages/history/History.js\";\nimport React, { Component } from \"react\";\nimport data from \"../../data/Data\";\nimport moment from \"moment\";\nimport { Card, Avatar, Col, Icon } from \"antd\";\nconst {\n  Meta\n} = Card;\n\nclass History extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      emask_data: [],\n      count_: 0\n    };\n  }\n\n  componentDidMount() {\n    if (localStorage.getItem(\"count_data\")) {\n      this.setState({\n        count: localStorage.setItem\n      });\n    }\n\n    localStorage.setItem(\"count_data\", 0);\n    fetch(\"https://fhrs5atn73.execute-api.ap-southeast-2.amazonaws.com/dev\").then(response => response.json()).then(data => this.setState({\n      emask_data: data\n    }));\n  }\n\n  sortData() {\n    let sortedData = this.state.emask_data.sort(function (a, b) {\n      // Compare the 2 dates\n      if (moment(a.date).isBefore(b.date)) return 1;\n      if (moment(a.date).isAfter(b.date)) return -1;\n      return 0;\n    });\n    return sortedData;\n  }\n\n  listDate() {\n    let sortedData = this.sortData(); // console.log(sortedData)\n\n    let list_date = [];\n\n    for (let i = 0; i < sortedData.length; i++) {\n      if (i === 0) {\n        list_date.push(moment(sortedData[i].date).format(\"YYYY-MM-DD\"));\n      } else {\n        // console.log(i)\n        // console.log(sortedData[i].date)\n        if (moment(sortedData[i].date).format(\"YYYY-MM-DD\") !== moment(sortedData[i - 1].date).format(\"YYYY-MM-DD\")) {\n          list_date.push(moment(sortedData[i].date).format(\"YYYY-MM-DD\"));\n        }\n      }\n    }\n\n    return list_date;\n  }\n\n  render() {\n    let sortedData = this.sortData();\n    let listDate = this.listDate();\n    console.log(\"list date\");\n    console.log(listDate);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 13\n      }\n    }, listDate.map((item, index) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 27\n        }\n      }, moment(item).format(\"DD-MMMM-YYYY\"), \" \")), /*#__PURE__*/React.createElement(\"hr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 23\n        }\n      }), sortedData.map((item1, index1) => {\n        if (moment(item1.date).format(\"YYYY-MM-DD\") === item) {\n          var colorText = item1.status === \"ALERTED\" ? \"red\" : \"green\";\n          return /*#__PURE__*/React.createElement(Card, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 37\n            }\n          }, /*#__PURE__*/React.createElement(Col, {\n            lg: 10,\n            md: 12,\n            sm: 24,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 41\n            }\n          }, /*#__PURE__*/React.createElement(Meta, {\n            avatar: /*#__PURE__*/React.createElement(Avatar, {\n              size: 30,\n              icon: item1.status === \"ALERTED\" ? \"alert\" : \"check\",\n              style: {\n                color: colorText,\n                backgroundColor: \"white\"\n              },\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 41\n              }\n            }),\n            title: item1.name,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 41\n            }\n          })), /*#__PURE__*/React.createElement(Col, {\n            lg: 10,\n            md: 12,\n            sm: 24,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 29\n            }\n          }, \" \", moment(item1.date).format(\"LT\")));\n        }\n      }));\n    }));\n  }\n\n}\n\nexport default History;","map":{"version":3,"sources":["/home/victor/Hackathon2020_project/src/pages/history/History.js"],"names":["React","Component","data","moment","Card","Avatar","Col","Icon","Meta","History","constructor","props","state","emask_data","count_","componentDidMount","localStorage","getItem","setState","count","setItem","fetch","then","response","json","sortData","sortedData","sort","a","b","date","isBefore","isAfter","listDate","list_date","i","length","push","format","render","console","log","map","item","index","item1","index1","colorText","status","color","backgroundColor","name"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\"\nimport data from \"../../data/Data\"\nimport moment from \"moment\"\nimport {Card, Avatar, Col, Icon } from \"antd\";\nconst {Meta} = Card\nclass History extends Component{\n    constructor(props){\n        super(props);\n        this.state = {\n            emask_data: [], \n            count_: 0\n        }\n    }\n    componentDidMount(){\n        if(localStorage.getItem(\"count_data\")){\n            this.setState({count: localStorage.setItem})\n        }\n        localStorage.setItem(\"count_data\", 0)\n        \n        fetch(\"https://fhrs5atn73.execute-api.ap-southeast-2.amazonaws.com/dev\")\n        .then(response => response.json())\n        .then(data => this.setState({emask_data:data}))\n    }\n    sortData(){\n        let sortedData = this.state.emask_data.sort(function(a, b) {\n            \n            // Compare the 2 dates\n            if (moment(a.date).isBefore(b.date)) return 1;\n            if (moment(a.date).isAfter(b.date)) return -1;\n            return 0;\n        });\n          return sortedData\n    }\n    listDate(){\n        let sortedData = this.sortData();\n        // console.log(sortedData)\n        let list_date = []\n        for (let i =0 ; i < sortedData.length; i++){\n            \n            if (i === 0){\n                list_date.push(moment(sortedData[i].date).format(\"YYYY-MM-DD\"))\n            }else{\n                // console.log(i)\n                // console.log(sortedData[i].date)\n                if (moment(sortedData[i].date).format(\"YYYY-MM-DD\") !== moment(sortedData[i-1].date).format(\"YYYY-MM-DD\")){\n                    list_date.push(moment(sortedData[i].date).format(\"YYYY-MM-DD\"))\n                }\n            }\n        }\n        return list_date\n    }\n    \n    render(){\n        let sortedData= this.sortData();\n        let listDate = this.listDate();\n        console.log(\"list date\")\n        console.log(listDate)\n\n        return(\n            <div>\n              {listDate.map((item, index) =>{\n                  return(\n                      <div>\n                      <h3><b>{moment(item).format((\"DD-MMMM-YYYY\"))} </b></h3>\n                      <hr></hr>\n                      {sortedData.map((item1, index1) =>{\n                          if(moment(item1.date).format(\"YYYY-MM-DD\") === item  ){\n                              var colorText = item1.status === \"ALERTED\"? \"red\": \"green\"\n                                return(\n                                    <Card >\n                                        <Col lg={10} md={12} sm={24}>\n                                           \n                                        <Meta\n                                avatar={<Avatar size = {30} icon= {item1.status === \"ALERTED\"? \"alert\": \"check\"}  style= {{color: colorText  , backgroundColor:\"white\" }} />}\n                                title =  {item1.name}\n                            /></Col>\n                            <Col lg={10} md={12} sm={24}> {moment(item1.date).format(\"LT\")}</Col>\n                            </Card>\n                                )\n                          }\n                      })}\n                      </div>\n                      \n                  )\n              })}  \n            </div>\n        )\n    }\n}\nexport default History"]},"metadata":{},"sourceType":"module"}